  
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>会員登録</title>
    <link type="text/css" rel="stylesheet" href="css.css">
  </head>
  <body>
    <form method="post" action="/account" id="create_customer" accept-charset="UTF-8" data-login-with-shop-sign-up="true">
      <input type="hidden" name="form_type" value="create_customer">
      <input type="hidden" name="utf8" value="✓">

      <div class="form-fields-columns">
        <div class="form-field form-field--half">
          <label class="form-field-title" for="register_last_name">
            姓
          </label>
          <input type="text" class="form-field-input form-field-text" id="register_last_name" name="customer[last_name]" autocapitalize="words">
        </div>

        <div class="form-field form-field--half">
          <label class="form-field-title" for="register_first_name">
            名
          </label>
          <input type="text" class="form-field-input form-field-text" id="register_first_name" name="customer[first_name]" autocapitalize="words" autofocus="">
        </div>

        <div class="form-field form-field--half">
          <label class="form-field-title" for="register_email">
            メールアドレス
          </label>
          <input type="text" class="form-field-input form-field-text" id="
          register_email" name="customer[email]" autocorrect="off" autocapitalize="off">
        </div>

        <div class="form-field form-field--half">
          <label class="form-field-title" for="register_password">
            パスワード
          </label>
          <input type="password" class="form-field-input form-field-text" id="register_password" name="customer[password]">
        </div>
        
        <div class="form-field md:tw-w-[calc(100%_-_20px)]">
          <label class="form-field-title" for="birthday">
            誕生日
          </label>
          <input type="date" class="form-field-input form-field-text form-field-filled" value="1980-01-01" id="birthday" name="customer[note][birthday]" onchange="validateDate(this.value)">
        </div>

        <div class="form-field md:tw-w-[calc(100%_-_20px)]">
          <div class="form-field-input form-field-text form-field-filled">
            <label class="form-field-title" for="gender">
              性別
            </label>
            <input type="radio" value="男性" name="customer[note][gender]" id="gender" class="tw-mr-[5px]"><span>男性</span>
            <input type="radio" value="女性" name="customer[note][gender]" id="gender" class="tw-mr-[5px]"><span>女性</span>
            <input type="radio" value="無回答" name="customer[note][gender]" id="gender" class="tw-mr-[5px]"><span>無回答</span>
          </div>
        </div>

        <div class="form-field md:tw-w-[calc(100%_-_20px)]">
          <div class="form-field-input form-field-text form-field-filled">
            <label class="form-field-title" for="accepts-marketing">
              メールマガジン
            </label>
            <input type="hidden" name="customer[accepts_marketing]" value="">
            <input type="checkbox" name="customer[accepts_marketing]" class="tw-mr-[5px]"><span>購読する</span>
          </div>
        </div>
      </div>

      <div class="form-action-row">
        <button id="submit-button" class="button-primary form-action--submit mdc-ripple-surface mdc-ripple-upgraded" type="submit">
          会員登録する
        </button>
      </div>
    </form>

    <script>
    function validateDate(dateValue) {
      const inputDate = new Date(dateValue);
      const currentDate = new Date();
      const year = inputDate.getFullYear();
      const month = inputDate.getMonth() + 1; // 0-indexed, so add 1
      const day = inputDate.getDate();

      // 日付が正しいかチェック
      if (inputDate > currentDate || year.toString() !== dateValue.substring(0, 4)
        || month.toString().padStart(2, '0') !== dateValue.substring(5, 7)
        || day.toString().padStart(2, '0') !== dateValue.substring(8, 10)) {
        document.getElementById('submit-button').disabled = true;
      } else {
        document.getElementById('submit-button').disabled = false;
      }
    }
    </script>
  </body>
</html>