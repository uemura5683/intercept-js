<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>React countdown</title>
    <style type="text/css">
		.CountdownDisplay > * {
		  display: inline-block;
		  margin-right:15px;
		}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.4.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.4.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.6.2/prop-types.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
  </head>
  <body>
    <div id="app"></div>


    <script type="text/babel">
		const App = props => {
		  return (
		    <Countdown toDate={new Date(2021, 09, 19)}>
		      {props => (
		        <CountdownDisplay
		          days={props.days}
		          asDays={props.asDays}
		          hours={props.hours}
		          minutes={props.minutes}
		          seconds={props.seconds}
		        />
		      )}
		    </Countdown>
		  );
		};

		const CountdownDisplay = props => {
		  const { years, months, days, asDays, hours, minutes, seconds } = props;

		  return (
		    <time
		      className="CountdownDisplay"
		      datetime={`P${asDays}DT${hours}H${minutes}M${seconds}S`}
		    >
		      <span className="CountdownDisplay__days">
		        {String(days).padStart(2, 0)} days
		      </span>
		      <span className="CountdownDisplay__hours">
		        {String(hours).padStart(2, 0)} hours
		      </span>
		      <span className="CountdownDisplay__minutes">
		        {String(minutes).padStart(2, 0)} minutes
		      </span>
		      <span className="CountdownDisplay__seconds">
		        {String(seconds).padStart(2, 0)} seconds
		      </span>
		    </time>
		  );
		};

		CountdownDisplay.propTypes = {
		  days: PropTypes.number.isRequired,
		  asDays: PropTypes.number.isRequired,
		  hours: PropTypes.number.isRequired,
		  minutes: PropTypes.number.isRequired,
		  seconds: PropTypes.number.isRequired,
		};

		class Countdown extends React.Component {
		  constructor(props) {
		    super(props);
		    this.state = { now: new Date() };
		  }

		  componentDidMount() {
		    this.intervalId = setInterval(() => {
		      this.setState({ now: new Date() });
		    }, this.props.intervalDelay);
		  }

		  componentWillUnmount() {
		    clearInterval(this.intervalId);
		  }

		  render() {
		    const { now } = this.state;
		    const { toDate } = this.props;
		    const delta = toDate - now;

		    return this.props.children({
		      days: Math.floor((delta / 1000 / 60 / 60 / 24) % 30),
		      hours: Math.floor((delta / 1000 / 60 / 60) % 24),
		      minutes: Math.floor((delta / 1000 / 60) % 60),
		      seconds: Math.floor((delta / 1000) % 60),
		      milliseconds: delta,
		      asDays: Math.floor(delta / 1000 / 60 / 60 / 24)
		    });
		  }
		}

		Countdown.propTypes = {
		  toDate: PropTypes.instanceOf(Date).isRequired,
		  intervalDelay: PropTypes.number
		};

		Countdown.defaultProps = {
		  intervalDelay: 1000
		};

		ReactDOM.render(<App />, document.getElementById("app"));

    </script>
  </body>
</html>
